---
layout : post
title : 파이썬 중급16-coroutines
subtitle : 파이썬 중급16-coroutines
category : 프로그래밍 언어 공부
tags : python
date : 2019-05-22 15:17:00
---

# 무엇인가?

coroutines는 제너레이터와 몇 가지를 제외하고는 거의 비슷하다.  
다른 점은 제너레이터는 생산자이고 코루틴은 데이터의 소비자 입니다.  
이것이 무슨 뜻인지 한 번 생각해 보겠습니다.  
전 포스팅에서 제너레이터는 함수에서 메모리를 적재하지 않고 호출될 때마다 꺼내서 쓰는 함수라는 것을 알게되었습니다.  
그렇다면 제너레이터에 외부에서 제공되는 데이터를 푸시하고 싶다면 어떻게 해야할까요?  
그것이 바로 코루틴입니다.  

# 사용법


```python
def test2(i):
    print('start test2 coroutine')
    while True:
        value = yield i
        i += value

b = test2(5)
```

위의 코드를 보면 일단 제너레이터 함수와 다른 점은 yield가 return대신에 쓰인게 아닌 표현식 즉 '='오른쪽에 쓰여져 있는 것을 볼 수 있습니다.  
일단은 한 번 b에 있는 값을 한 번 호출해보도록 하겠습니다.  


```python
next(b)
```

    start test2 coroutine
    5



일단은 5가 나왔네요. 그럼 지금 현재 yield i에서 멈춰있는 상태일 것입니다. 이 때 제너레이터 안에 3을 전달할 수 있습니다.  
send()함수를 이용해서 말이죠.


```python
b.send(3)
```




    8



b.send(3)을 입력하면 value값에 3을 전달한 후 원래 i인 5에 3을 더해서 8을 출력합니다.  
제너레이터랑 다른 점은 제너레이터는 출력 후 그 자리에 멈춰 있다면 코루틴은 출력 후 값을 받을 준비를 하고 있다는 차이점이 있겠습니다.  
