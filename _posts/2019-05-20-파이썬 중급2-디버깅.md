---
layout : post
title : 파이썬 중급 2- 디버깅
subtitle : 파이썬 중급 2- 디버깅
category : 프로그래밍 언어 공부
tags : python
date : 2019-05-20 15:19:01
---

# 무엇?

디버그(debug), 디버깅(debugging)은 컴퓨터 프로그램의 정확성이나 논리적인 오류(버그)를 검출하여 제거하는 과정을 뜻한다.  

# 커맨드라인에서 실행하기


```
python -m pdb my_script.py
```

위 명령어를 커맨드라인에서 입력하면 첫번째 실행문을 발견하면 실행을 정지시킨다.  
스크립트가 짧을 때 한 줄 한 줄 실행하면서 변수들을 확인할 수 있습니다.  

# 스크립트 내에서 실행하기

파이썬 내장 인터랙티브 디버거인 pdb(python debugger)를 이용하여 정지지점을 스크립트 안에서 걸어서 틍정한 지점에서의 상태와 변수들을 확인할 수 있습니다.  
아래의 예시는 pdb.set_trace()메로드를 활용한 것입니다.  
주의하실 점은 pdb모듈은 파이썬 내에 설치가 되어 있으므로 pip install로 시간이 뺏기는 일이 없도록 하시길 바랍니다.  

# 사용법

예제를 한번 보겠습니다.  


```
import pdb
x=0
while True:
    x+=1
    print ("Current number:", x)
    pdb.set_trace()
```

위의 코드를 실행하면 Current number : 1이 나타난 이후 (pdb) 프롬프트로 넘어갈 것이다.  
이 프롬프트는 디버거가 시작됐으며, 현재 프레임 내에서 실행 명령을 기다리고 있다는 의미이다.  
파이썬 3.7이상에서는 pdb.set_trace 대신에 breakpoint()만 입력해도 된다.  
이제 파이썬 디버거 명령어를 살펴보자

- p/pp : Print expressio  
n일부 표현식의 결과를 프린트한다.   
여기서 살펴본 예제를 실행하고 첫 브레이크 포인트에 p x를 치면 이 의미는 현재 x값을 프린트하라는 뜻이고 실행시키면 현재 x의 값인 1이 나온다.  

- c :contiue  
사용자가 다른 브레이크포인트를 입력할 때까지 프로그램을 계속 실행한다.  
c를 입력한 후 다음 브레이크 포인트에서 p x를 치면, 사이클을 돈 후의 값인 2가 화면에 나타난다.   

- s : Step forward  
프로그램의 한 줄 앞으로 간다. pdb 프롬프트가 실행된 줄 다음에 나타날 것이다.
현 예제에서는 print ("Current number:", x)가 나올 것이다.  

- l : List source  
실행 중에 특정 포인트에서 프로그램의 소스코드를 프린트한다.  
프린트 포인트 중간에 현재 라인이 나타날 것이다.  

- w : Print stack trace  
특정 순간에서 프로그램의 전체 스택을 보여준다.  
이를 이용하면 현재 모듈이 전체 실행 과정 중에서 어디에 있는지를 알 수 있다.  


- ! : Execute statement  
느낌표를 앞에 붙이면 모든 유효한 파이썬 선언을 현재 실행중인 모듈과 함께 실행할 수 있다.  
앞선 예제에서 pdb프롬프트의 경우 x에 100을 설정하려면 !x = 100이라고 쓰면 된다.  
단, 표현식에서 공백이 없다는데 주의하자.
파이썬에서 모든 공백은 들여쓰기로 인식된다.  

# pdb로 조건부 디버깅 하기

파이썬 선언만으로 디버거를 호출할 수 있으므로 조건에 따라 디버거를 팝업으로 사용할 수도 있다.  


- if/then 혹은 try/except 문으로 pdb를 조건부로 실행  

- pdb.run() 혹은 pdb.runeval() 사용

이 외에 구체적으로 어떤 작업을 수행하는지 [pdb 공식 파이썬 디버거 문서](https://docs.python.org/3/library/pdb.html)를 참고하자.


```

```
